services:
    tuna.menu.twig:
        class: TheCodeine\MenuBundle\Twig\MenuExtension
        calls:
            - [initRuntime, ["@twig"]]
        arguments:
            - "@twig"
            - "@the_codeine_menu.manager"
            - "@router"
            - "%the_codeine_admin.components.menu.default_template%"
        tags:
            - { name: twig.extension }

    the_codeine_menu.menu_type:
        class: TheCodeine\MenuBundle\Form\MenuType
        arguments: ["%the_codeine_page.model%"]
        tags:
            - { name: form.type }

    the_codeine_menu.manager:
        class: "%the_codeine_menu.manager_class%"
        arguments:
            - "%the_codeine_menu.model%"
            - "%the_codeine_page.model%"
            - "@doctrine.orm.default_entity_manager"
            - "@request_stack"

    tuna.menu.listener.page:
        class: TheCodeine\MenuBundle\EventListener\PageSubscriber
        tags:
            - { name: doctrine.event_subscriber }

    admin.event_listener.menu_subscriber:
        class: AdminBundle\EventListener\MenuSubscriber
        tags:
            - { name: doctrine.event_subscriber }
